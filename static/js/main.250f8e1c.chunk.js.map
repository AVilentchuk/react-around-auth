{"version":3,"sources":["contexts/CurrentUserContext.js","utils/api.js","assets/icons/Logo_vector.svg","components/Header.js","components/Likes.js","components/Card.js","assets/images/avatar_photo.png","components/Main.js","components/Footer.js","components/ImagePopup.js","utils/FormValidator.js","utils/loader.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","utils/auth.js","components/InfoTooltip.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["CurrentUserContext","React","createContext","customFetch","url","properties","fetch","then","response","ok","json","Promise","reject","status","statusText","api","groupId","apiKey","baseUrl","this","headers","authorization","cardData","method","body","JSON","stringify","name","link","cardId","about","_id","cohort","avatarLink","avatar","Header","props","loginStatus","handleLogout","navigate","userEmail","useState","isMenuOpen","setIsMenuOpen","isMobileSize","setIsMobileSize","width","window","innerWidth","height","innerHeight","dimensions","setDimensions","handleResize","textHolder","location","pathname","className","onClick","loggedEmail","headerButton","type","innerMenu","outerMenu","useEffect","console","log","addEventListener","removeEventListener","src","logo","alt","Likes","likes","target","isOver","likesRef","createRef","position","useMousePosition","selfLike","some","item","likesUpdated","setLikesUpdated","current","style","top","y","offsetHeight","left","x","offsetWidth","length","renderLike","like","ref","map","slice","Card","onCardLike","onCardDelete","currentUser","useContext","setIsOver","tooltip","id","liked","isTooltipShown","setIsTooltipShown","clientWidth","scrollWidth","owner","onMouseLeave","onMouseOver","visibility","Main","onEditProfileClick","onAddPlaceClick","onEditAvatarClick","onEnlargeAvatarClick","onCardClick","handleCardLike","cardsData","onDeleteClick","profilePhoto","card","Footer","ImagePopup","navigation","targetObj","isOpen","onClose","useKey","goLeft","goRight","navigationArrows","event","stopPropagation","FormValidator","formElement","settings","resetValidation","inputStatus","_settings","_inputList","forEach","input","_deactivateError","classList","remove","_controlSubmit","_element","errorField","nextElementSibling","inputErrorActive","textContent","_activateError","message","add","formStatus","submitSelector","disabledButton","submitButton","_formElement","querySelector","setAttribute","removeAttribute","_checkIfInputValid","evt","validity","valid","validationMessage","_setEventListeners","formInput","Array","from","querySelectorAll","preventDefault","Object","assign","getButtonText","buttonText","tail","button","split","buttonTexts","test","exec","toString","replace","loader","dots","completeTimeDelay","buttonSelector","clickHandler","callbackEnd","onError","onSuccess","element","successMessage","failMessage","interval","count","buttonStateProcessing","buttonStateComplete","targetElement","intervalController","setInterval","res","clearInterval","setTimeout","catch","finally","PopupWithForm","children","formName","formHeader","onSubmit","validate","form","setForm","formRef","useRef","buttonRef","validatedForm","enableValidation","margin","e","EditProfilePopup","updateCurrentUser","setName","description","setDescription","windowId","htmlFor","value","placeholder","required","minLength","maxLength","onChange","EditAvatarPopup","avatarInput","AddPlacePopup","addNewCard","setLink","ConfirmPopup","confirmDelete","BASE_URL","checkToken","localStorage","getItem","Accept","Authorization","a","InfoTooltip","statusMessage","spinner","cx","cy","r","toolTipMessage","setToolTipMessage","textAlign","Login","handleLogin","onOpen","checkLoggedIn","email","setEmail","password","setPassword","setStatus","setStatusMessage","handleSubmit","data","setItem","token","err","auth","error","parsedError","disabled","to","Register","handleRegister","ProtectedRoute","setPosition","setFromEvent","clientX","clientY","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isPlacePopupOpen","setIsPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEnlargeAvatarPopupOpen","setIsEnlargeAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","isToolTipOpen","setIsToolTipOpen","selectedCard","setSelectedCard","setCurrentUser","setCardsData","isUserLogged","setIsUserLogged","loggedUser","setLoggedUser","key","callback","condition","callbackRef","document","handle","code","getUserInfo","getProfile","callData","getCards","getInitialCards","dislikePhoto","newCardData","result","likePhoto","handleDeleteCard","deleteCardPost","filter","handleAddCard","postNewCard","Cards","concat","handleClose","handleUpdateUserData","updateProfile","handleUpdateAvatarImage","updateProfilePhoto","index","findIndex","parseInt","handleToolTipOpen","details","useNavigate","validation","clear","Provider","path","setUser","cardClicked","setUserData","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.250f8e1c.chunk.js","sourcesContent":["import React from \"react\";\nexport const CurrentUserContext = React.createContext();\n","const customFetch = (url, properties) =>\n  fetch(url, properties).then((response) => {\n    if (response.ok) return response.json();\n    return Promise.reject(\n      `Failed with status:( ${response.status} ${response.statusText} )`\n    );\n  });\n\nclass Api {\n  constructor({ groupId, apiKey, baseUrl }) {\n    this.groupId = groupId;\n    this.apiKey = apiKey;\n    this.baseUrl = baseUrl;\n  }\n\n  getInitialCards() {\n    return customFetch(`${this.baseUrl}${this.groupId}/cards`, {\n      headers: {\n        authorization: `${this.apiKey}`,\n        \"Content-Type\": \"application/json\",\n      },\n    });\n  }\n\n  postNewCard(cardData) {\n    return customFetch(`${this.baseUrl}${this.groupId}/cards/`, {\n      method: \"POST\",\n      headers: {\n        authorization: `${this.apiKey}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: `${cardData.name}`,\n        link: `${cardData.link}`,\n      }),\n    });\n  }\n\n  deleteCardPost(cardId) {\n    return customFetch(`${this.baseUrl}${this.groupId}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: `${this.apiKey}`,\n      },\n    });\n  }\n\n  getProfile() {\n    return customFetch(`${this.baseUrl}${this.groupId}/users/me`, {\n      headers: {\n        authorization: `${this.apiKey}`,\n      },\n    });\n  }\n\n  updateProfile({ name, about }) {\n    return customFetch(`${this.baseUrl}${this.groupId}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: `${this.apiKey}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name: `${name}`,\n        about: `${about}`,\n        _id: `${this.apiKey}`,\n        cohort: `${this.groupId}`,\n      }),\n    });\n  }\n\n  updateProfilePhoto(avatarLink) {\n    return customFetch(`${this.baseUrl}${this.groupId}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: `${this.apiKey}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        avatar: `${avatarLink}`,\n      }),\n    });\n  }\n\n  likePhoto(cardId) {\n    return customFetch(`${this.baseUrl}${this.groupId}/cards/likes/${cardId}`, {\n      method: \"PUT\",\n      headers: {\n        authorization: `${this.apiKey}`,\n      },\n    });\n  }\n\n  dislikePhoto(cardId) {\n    return customFetch(`${this.baseUrl}${this.groupId}/cards/likes/${cardId}`, {\n      method: \"Delete\",\n      headers: {\n        authorization: `${this.apiKey}`,\n      },\n    });\n  }\n}\nconst options = {\n  baseUrl: \"https://around.nomoreparties.co/v1/\",\n  apiKey: \"69483cc0-2fd4-4d47-b549-ff7c13f67c88\",\n  groupId: \"group-12\",\n};\n\nconst api = new Api(options);\nexport { customFetch };\nexport default api;\n","export default __webpack_public_path__ + \"static/media/Logo_vector.e57222ff.svg\";","import { useEffect, useState } from \"react\";\nimport logo from \"../assets/icons/Logo_vector.svg\";\n\nconst Header = (props) => {\n  const { loginStatus, handleLogout, navigate, userEmail } = props;\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [isMobileSize, setIsMobileSize] = useState(false);\n  const [dimensions, setDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n  //<<START>>Helper functions <<START>>\n  const handleResize = () => {\n    setDimensions({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n  };\n\n  const handleClick = () => {\n    if (loginStatus) {\n      handleLogout();\n      return;\n    }\n    if (window.location.pathname === \"/login\") navigate(\"/register\");\n    else navigate(\"/login\");\n  };\n  //<<END>>Helper functions <<END>>\n  //<<START>>Conditional variables & elements <<START>>\n  const textHolder = loginStatus\n    ? \"Log out\"\n    : window.location.pathname === \"/login\"\n    ? \"Sign up\"\n    : \"Log in\";\n\n  const link = (\n    <a className='link header__link' onClick={handleClick}>\n      {textHolder}\n    </a>\n  );\n\n  const loggedEmail = (\n    <p className='header__email'>\n      {loginStatus && userEmail != \"\" && userEmail}\n    </p>\n  );\n\n  const headerButton = isMenuOpen ? (\n    <button\n      className='button button_type_close-menu'\n      type='button'\n      aria-label='close top menu'\n      onClick={() => setIsMenuOpen(false)}\n    ></button>\n  ) : (\n    <button\n      className='button button_type_menu'\n      type='button'\n      aria-label='open top menu'\n      onClick={() => setIsMenuOpen(true)}\n    ></button>\n  );\n\n  const innerMenu = (\n    <div className='header__link-container'>\n      {!(isMobileSize && loginStatus) ? (\n        <>\n          {loggedEmail}\n          {link}\n        </>\n      ) : (\n        <>{headerButton}</>\n      )}\n    </div>\n  );\n  const outerMenu = (\n    <div\n      className={`header__mobile-container ${\n        isMenuOpen && loginStatus && \"header__mobile-container_active\"\n      }`}\n    >\n      {loggedEmail}\n      {link}\n    </div>\n  );\n  //<<END>>Conditional variables <<END>>\n  //<<START>>useEffects <<START>>\n  useEffect(() => {\n    if (dimensions.width < 600) setIsMobileSize(true);\n    else {\n      setIsMobileSize(false);\n      setIsMenuOpen(false);\n    }\n    console.log(isMobileSize);\n  }, [dimensions]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize, false);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize, false);\n    };\n  }, []);\n\n  useEffect(() => {\n    setIsMenuOpen(false);\n  }, [loginStatus]);\n  //<<START>>useEffects <<START>>\n\n  return (\n    <>\n      {isMobileSize && outerMenu}\n      <header className='header'>\n        <img className='header__logo' src={logo} alt=\"site's logo\" />\n        {innerMenu}\n      </header>\n    </>\n  );\n};\n\nexport default Header;\n","import { createRef, useEffect, useState } from \"react\";\nimport { useMousePosition } from \"./App\";\n\nconst Likes = ({ likes, target, isOver }) => {\n  const likesRef = createRef();\n  const position = useMousePosition();\n  const selfLike = likes.some((item) => item._id === target) ? \"you \" : \"\";\n  const [likesUpdated, setLikesUpdated] = useState();\n\n  // console.log(position)\n  useEffect(() => {\n    if (isOver) {\n      likesRef.current.style.top = `${position.y - likesRef.current.offsetHeight}px`;\n      window.innerWidth < 767 ?\n        likesRef.current.style.left = `${position.x - likesRef.current.offsetWidth}px` :\n        likesRef.current.style.left = `${position.x}px`;\n    }\n  }, [isOver, position, likesRef])\n\n  useEffect(() => {\n    setLikesUpdated(selfLike ? likes.length - 1 : likes.length);\n  }, [selfLike, likes])\n\n  const renderLike = (like) => {\n    if (like._id !== target)\n      return (<div className=\"likes__owner\" key={like._id}>\n        <img className=\"likes__owner-image\" src={like.avatar} alt={`Profile pictue of ${like.name}`} />\n        <p className=\"likes__owner-name\">{like.name}</p>\n      </div >)\n  }\n\n  return (\n    <div ref={likesRef} className=\"likes\">\n      <div className=\"likes__container\">{(likes.length <= 3) ? likes.map((like) => renderLike(like)) : likes.slice(0, 3).map((like) =>\n        renderLike(like))}</div>\n      {likesUpdated > 3 ? (<span className=\"likes__info\">{`${selfLike}and ${(likesUpdated - 3)} others liked this`}</span>) : (<span className=\"likes__info\">{` ${likesUpdated && selfLike ? \"and \" : \"\"}${selfLike}liked this`}</span>)}\n    </div >\n  )\n}\n\nexport default Likes;\n","import { useState, useEffect, createRef, useContext } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nimport Likes from \"./Likes\";\n\nconst Card = ({ cardData, onClick, onCardLike, onCardDelete }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const [isOver, setIsOver] = useState(false);\n  const tooltip = createRef();\n\n  const { name, likes, link, _id: id } = cardData;\n\n  const liked = likes.some((like) => like._id === currentUser._id);\n\n  const [isTooltipShown, setIsTooltipShown] = useState(false);\n\n  useEffect(() => {\n    setIsTooltipShown(\n      tooltip.current.clientWidth < tooltip.current.scrollWidth\n    );\n  }, [tooltip]);\n\n  const handleLikeClick = () => onCardLike(id, liked);\n\n  function handleClick() {\n    return onClick(cardData);\n  }\n\n  return (\n    <div className='card'>\n      {cardData.owner._id === currentUser._id && (\n        <button\n          className='button button_type_delete'\n          type='click'\n          onClick={() => onCardDelete(cardData)}\n        ></button>\n      )}\n      <img\n        alt={name}\n        src={link}\n        className='card__image'\n        onClick={handleClick}\n      />\n      <div className='card__footer'>\n        <h2 ref={tooltip} className='card__text'>\n          {name}\n        </h2>\n\n        <div\n          className='card__likes-container'\n          onMouseLeave={() => {\n            setIsOver(false);\n          }}\n        >\n          {likes.length ? (\n            <Likes\n              target={currentUser._id}\n              likes={likes}\n              isOver={isOver}\n              key={id ? id : null}\n            />\n          ) : (\n            \"\"\n          )}\n          <button\n            className={`button card__like-button ${\n              liked && \"card__like-button_active\"\n            }`}\n            id='likebtn'\n            aria-label='heart icon (like)'\n            onClick={handleLikeClick}\n            onMouseOver={() => {\n              setIsOver(true);\n            }}\n          />\n          <label\n            className='card__like-label'\n            style={{ visibility: likes.length ? \"visible\" : \"hidden\" }}\n          >\n            {likes.length}\n          </label>\n        </div>\n        {isTooltipShown && <div className='card__overflow-tooltip'>{name}</div>}\n      </div>\n    </div>\n  );\n};\n\nexport default Card;\n","export default __webpack_public_path__ + \"static/media/avatar_photo.15862bec.png\";","import Card from \"./Card\";\nimport profilePhoto from \"../assets/images/avatar_photo.png\";\nimport { useContext } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nconst Main = ({\n  onEditProfileClick,\n  onAddPlaceClick,\n  onEditAvatarClick,\n  onEnlargeAvatarClick,\n  onCardClick,\n  handleCardLike,\n  cardsData,\n  onDeleteClick,\n}) => {\n  //card Component template\n  const renderCard = (item) => (\n    <Card\n      onClick={onCardClick}\n      cardData={item}\n      onCardLike={handleCardLike}\n      onCardDelete={onDeleteClick}\n      key={item._id}\n    />\n  );\n\n  const currentUser = useContext(CurrentUserContext);\n\n  return (\n    <div>\n      <main>\n        <section className='profile'>\n          <div className='profile__photo-container'>\n            <img\n              className='profile__photo'\n              src={currentUser ? currentUser.avatar : profilePhoto}\n              alt={\n                currentUser\n                  ? `Photo of ${currentUser.name}`\n                  : \"Photo of Kristine Weiss\"\n              }\n            />\n            <div className='profile__photo-buttons'>\n              <button\n                className='button button_type_edit-profile-image'\n                onClick={onEditAvatarClick}\n              ></button>\n              <button\n                className='button button_type_enlarge-profile-image'\n                onClick={() => {\n                  onEnlargeAvatarClick(currentUser);\n                }}\n              ></button>\n            </div>\n          </div>\n          <div className='profile__description'>\n            <h1 className='profile__name'>\n              {currentUser ? currentUser.name : \"Kristine Weiss\"}\n            </h1>\n            <button\n              className='button profile__button-edit'\n              type='button'\n              aria-label='Edit profile'\n              onClick={onEditProfileClick}\n            ></button>\n            <p className='profile__about'>\n              {currentUser\n                ? currentUser.about\n                : \"Travel guide, food enthusiastic and culture lover\"}\n            </p>\n          </div>\n          <button\n            className='button profile__button-add'\n            type='button'\n            aria-label='Add or create new profile'\n            onClick={onAddPlaceClick}\n          ></button>\n        </section>\n\n        <section className='locations'>\n          {cardsData.map((card) => renderCard(card))}\n        </section>\n      </main>\n    </div>\n  );\n};\n\nexport default Main;\n","const Footer = () => {\n  return (\n    <div>\n      <footer className='footer'>\n        <p className='footer__about'>&copy; 2021 Around The U.S.</p>\n      </footer>\n    </div>\n  );\n};\n\nexport default Footer;\n","const ImagePopup = ({\n  navigation,\n  targetObj,\n  isOpen,\n  onClose,\n  id,\n  useKey,\n  goLeft,\n  goRight,\n}) => {\n  const navigationArrows = [\n    <div\n      key='leftNav'\n      className='navigation-arrow navigation-arrow_left'\n      onClick={goLeft}\n    ></div>,\n    <div\n      key='rightNav'\n      className='navigation-arrow navigation-arrow_right'\n      onClick={goRight}\n    ></div>,\n  ];\n\n  useKey(\"ArrowRight\", goRight, isOpen);\n  useKey(\"ArrowLeft\", goLeft, isOpen);\n  useKey(\"Escape\", onClose, isOpen);\n\n  return (\n    <div\n      className={`popup popup_gallery ${isOpen ? \"popup_active\" : \"\"}`}\n      onClick={onClose}\n    >\n      <div\n        className='popup__gallery'\n        id={id}\n        onClick={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        <button\n          className='button button_type_close'\n          type='button'\n          aria-label='Close window'\n          onClick={onClose}\n        ></button>\n        <img\n          className='popup__img'\n          src={\n            !targetObj\n              ? null\n              : targetObj.link\n              ? targetObj.link\n              : targetObj.avatar\n              ? targetObj.avatar\n              : \"\"\n          }\n          alt={!targetObj ? null : targetObj.name}\n        />\n        <h2 className='popup__place-name'>\n          {!targetObj ? null : targetObj.name}\n        </h2>\n        {navigation && navigationArrows}\n      </div>\n    </div>\n  );\n};\n\nexport default ImagePopup;\n","//FormValidator Class - > Added\nclass FormValidator {\n  constructor(formElement, settings) {\n    this._settings = Object.assign(\n      {\n        formInput: \"form__input\",\n        inputStatus: \"form__input_status\",\n        submitSelector: \"button_type_submit\",\n        disabledButton: \"button_disabled\",\n        inputErrorActive: \"form__input-error_active\",\n      },\n      settings\n    );\n    this._formElement = formElement;\n  }\n  //<<START>>public methods of form validation.<<START>>\n  enableValidation() {\n    return this._setEventListeners();\n  }\n\n  resetValidation = () => {\n    const { inputStatus } = this._settings;\n    this._inputList.forEach((input) => {\n      this._deactivateError(input);\n      input.classList.remove(`${inputStatus}`);\n    });\n    this._controlSubmit(true);\n    return this._element;\n  };\n  //<<END>>public methods of form validation.<<END>>\n  //<<START>> Error messages and button controls <<START>>\n  _deactivateError = (input) => {\n    const errorField = input.nextElementSibling;\n    errorField.classList.remove(this._settings.inputErrorActive);\n    errorField.textContent = \"\";\n  };\n  _activateError = (input, message) => {\n    const errorField = input.nextElementSibling;\n    errorField.classList.add(this._settings.inputErrorActive);\n    errorField.textContent = message;\n  };\n  //Controls the status of the submit button, gets form inputs status from checkIfInputValid\n  _controlSubmit = (formStatus) => {\n    const { submitSelector, disabledButton } = this._settings;\n    const submitButton = this._formElement.querySelector(`.${submitSelector}`);\n\n    if (formStatus) {\n      submitButton.classList.add(disabledButton);\n      submitButton.setAttribute(\"disabled\", true);\n    } else {\n      submitButton.classList.remove(disabledButton);\n      submitButton.removeAttribute(\"disabled\");\n    }\n  };\n  _checkIfInputValid = (evt) => {\n    const input = evt.target;\n    input.classList.add(this._settings.inputStatus);\n    if (!input.validity.valid) {\n      this._activateError(input, input.validationMessage);\n    } else {\n      this._deactivateError(input);\n    }\n\n    const formStatus = this._inputList.some((item) => !item.validity.valid);\n    return this._controlSubmit(formStatus);\n  };\n  //<<END>> Error messages control <<END>>\n  //<<START>> Listeners control <<START>>\n  _setEventListeners = () => {\n    const { formInput } = this._settings;\n    this._inputList = Array.from(\n      this._formElement.querySelectorAll(`.${formInput}`)\n    );\n    this._formElement.addEventListener(\"submit\", (evt) => {\n      evt.preventDefault();\n    });\n    this._formElement.addEventListener(\"reset\", this.resetValidation);\n    this._inputList.forEach((input) => {\n      input.addEventListener(\"input\", this._checkIfInputValid);\n    });\n    return this._element;\n  };\n\n  //<<END>> Listeners control <<END>>\n}\n\nexport default FormValidator;\n","export function getButtonText(buttonText, tail, button) {\n  if (buttonText.split(\" \").length > 1) {\n    const buttonTexts = buttonText.split(\" \");\n\n    return /\\w*e\\b/.test(buttonTexts[0])\n      ? /\\w*e\\b/.exec(buttonTexts[0]).toString().replace(/\\w\\b/, tail)\n      : button.textContent.toString().split(\" \")[0] +\n          tail +\n          \" \" +\n          button.textContent.toString().split(\" \")[1];\n  }\n  return /\\w*e\\b/.test(buttonText)\n    ? /\\w*e\\b/.exec(buttonText).toString().replace(/\\w\\b/, tail)\n    : button.textContent.toString() + tail;\n}\n\nexport const loader = ({\n  dots,\n  completeTimeDelay,\n  buttonSelector,\n  clickHandler,\n  callbackEnd = () => {},\n  onError = () => {},\n  onSuccess = () => {},\n  element,\n  successMessage,\n  failMessage,\n}) => {\n  const { interval, count } = dots;\n  const button = buttonSelector;\n  button && button.setAttribute(\"disabled\", true);\n  const buttonText = button.textContent.toString();\n  console.log(\n    buttonText,\n    buttonText.split(\" \").length,\n    button.textContent.toString().split(\" \")[0]\n  );\n  const buttonStateProcessing = getButtonText(buttonText, \"ing\", button);\n  const buttonStateComplete = getButtonText(buttonText, \"ed\", button);\n  const targetElement = element ? element : button;\n\n  targetElement.textContent = buttonStateProcessing;\n\n  const loop = () => {\n    targetElement.textContent =\n      targetElement.textContent.length > buttonStateProcessing.length + count\n        ? `${buttonStateProcessing}`\n        : targetElement.textContent + \".\";\n  };\n  let intervalController = setInterval(loop, interval);\n\n  clickHandler()\n    .then((res) => {\n      clearInterval(intervalController);\n      targetElement.textContent = element\n        ? successMessage\n        : `${buttonStateComplete} successfully`;\n      setTimeout(() => {\n        onSuccess();\n      }, completeTimeDelay);\n    })\n    .catch((res) => {\n      targetElement.textContent = failMessage ? failMessage : `Failed`;\n      setTimeout(() => {\n        onError(res);\n      }, completeTimeDelay);\n      clearInterval(intervalController);\n    })\n    .finally(() => {\n      setTimeout(() => {\n        callbackEnd();\n      }, completeTimeDelay * 3);\n\n      setTimeout(() => {\n        targetElement.textContent = `${buttonText}`;\n        button && button.removeAttribute(\"disabled\");\n      }, completeTimeDelay * 2);\n    });\n};\n","import { useEffect, useRef, useState } from \"react\";\nimport FormValidator from \"../utils/FormValidator\";\nimport { loader } from \"../utils/loader.js\";\n\nconst PopupWithForm = ({\n  children,\n  formName,\n  formHeader,\n  onClose,\n  id,\n  isOpen,\n  onSubmit,\n  validate,\n  buttonText,\n}) => {\n  const [form, setForm] = useState();\n  const formRef = useRef();\n  const buttonRef = useRef();\n\n  useEffect(() => {\n    if (validate) {\n      const validatedForm = new FormValidator(formRef.current);\n      validatedForm.enableValidation();\n      setForm(validatedForm);\n    } else { formRef.current.style.margin = \"0 auto\" }\n  }, [validate]);\n\n  useEffect(() => {\n    if (form && isOpen) form.resetValidation();\n  }, [isOpen, form]);\n\n  return (\n    <div className={`popup ${isOpen ? \"popup_active\" : \"\"}`} onClick={onClose}>\n      <div\n        className='popup__window'\n        id={id}\n        onClick={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        <button\n          className='button button_type_close'\n          type='button'\n          aria-label='Close window'\n          onClick={onClose}\n        ></button>\n        <h2 className='popup__title'>{formHeader}</h2>\n        <form\n          className='form'\n          ref={formRef}\n          name={`${formName}`}\n          onSubmit={(e) => {\n            e.preventDefault();\n            loader({\n              dots: {\n                interval: 75,\n                count: 4,\n              },\n              completeTimeDelay: 400,\n              buttonSelector: buttonRef.current,\n              clickHandler: () => {\n                return onSubmit();\n              },\n              onSuccess: () => {\n                onClose();\n              },\n            });\n          }}\n        >\n          {children}\n          <button\n            className='button button_type_submit'\n            type='submit'\n            ref={buttonRef}\n          >\n            {buttonText}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default PopupWithForm;\n","import { useContext, useEffect, useState } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\nconst EditProfilePopup = ({ isOpen, onClose, updateCurrentUser, useKey }) => {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    if (isOpen) {\n      setName(currentUser.name);\n      setDescription(currentUser.about);\n    }\n  }, [currentUser, isOpen]);\n\n  const formSubmit = () => {\n    return updateCurrentUser(\n      Object.assign({}, currentUser, { name: name, about: description })\n    );\n  };\n\n  useKey(\"Escape\", onClose, isOpen);\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={onClose}\n      windowId='w-edit'\n      formHeader='Edit Profile'\n      formName='editWindow'\n      onSubmit={formSubmit}\n      validate={true}\n      buttonText='Save'\n    >\n      <label htmlFor='name' className='form__field'>\n        <input\n          className='form__input'\n          type='text'\n          name='name'\n          id='name'\n          value={name || \"\"}\n          placeholder='Insert name here...'\n          required\n          minLength='2'\n          maxLength='40'\n          onChange={(e) => setName(e.target.value)}\n        />\n        <span className='form__input-error'></span>\n      </label>\n      <label htmlFor='about' className='form__field'>\n        <input\n          className='form__input'\n          type='text'\n          name='about'\n          id='about'\n          value={description || \"\"}\n          placeholder='Insert job here...'\n          required\n          minLength='2'\n          maxLength='200'\n          onChange={(e) => setDescription(e.target.value)}\n        />\n        <span className='form__input-error'></span>\n      </label>\n    </PopupWithForm>\n  );\n};\n\nexport default EditProfilePopup;\n","import { useContext, useEffect, useRef } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nconst EditAvatarPopup = ({ isOpen, onClose, updateCurrentUser, useKey }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const avatarInput = useRef();\n\n  //fills the field on open with current value.\n  useEffect(() => {\n    if (isOpen) avatarInput.current.value = currentUser.avatar;\n  }, [currentUser, isOpen]);\n\n  const formSubmit = () => {\n    return updateCurrentUser(\n      Object.assign({}, currentUser, { avatar: avatarInput.current.value })\n    );\n  };\n\n  useKey(\"Escape\", onClose, isOpen);\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={onClose}\n      windowId='w-editpic'\n      formHeader='Change profile picture'\n      formName='editprofpic'\n      onSubmit={formSubmit}\n      validate={true}\n      buttonText='Update'\n    >\n      <label htmlFor='pictureurl' className='form__field'>\n        <input\n          ref={avatarInput}\n          className='form__input'\n          type='url'\n          name='avatar'\n          id='pictureurl'\n          placeholder='insert url for picture'\n          required\n        />\n        <span className='form__input-error'></span>\n      </label>\n    </PopupWithForm>\n  );\n};\n\nexport default EditAvatarPopup;\n","import { useEffect, useState } from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst AddPlacePopup = ({ isOpen, onClose, addNewCard, useKey }) => {\n  const [name, setName] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n\n  const fromSubmit = () => {\n    return addNewCard({ name, link });\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      setName(\"\");\n      setLink(\"\");\n    }\n  }, [isOpen]);\n\n  useKey(\"Escape\", onClose, isOpen);\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      onClose={onClose}\n      windowId='w-add'\n      formHeader='New place'\n      formName='addWindow'\n      onSubmit={fromSubmit}\n      validate={true}\n      buttonText='Add'\n    >\n      <label htmlFor='place-title' className='form__field'>\n        <input\n          className='form__input'\n          type='text'\n          name='name'\n          id='place-title'\n          placeholder='Title'\n          value={name}\n          required\n          minLength='1'\n          maxLength='30'\n          onChange={(e) => setName(e.target.value)}\n        />\n        <span className='form__input-error'></span>\n      </label>\n      <label htmlFor='image-link' className='form__field'>\n        <input\n          className='form__input'\n          type='url'\n          name='link'\n          id='image-link'\n          placeholder='Image link'\n          value={link}\n          required\n          onChange={(e) => setLink(e.target.value)}\n        />\n        <span className='form__input-error'></span>\n      </label>\n    </PopupWithForm>\n  );\n};\n\nexport default AddPlacePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nconst ConfirmPopup = ({ isOpen, onClose, confirmDelete }) => {\n  const onConfirm = () => {\n    return confirmDelete();\n  };\n\n  return (\n    <PopupWithForm\n      formName='confirmForm'\n      isOpen={isOpen}\n      id='w-confirm'\n      onClose={onClose}\n      formHeader='Are you sure?'\n      onSubmit={onConfirm}\n      validate={false}\n      buttonText='Delete'\n    />\n  );\n};\n\nexport default ConfirmPopup;\n","export const BASE_URL = \"https://register.nomoreparties.co\";\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((response) => {\n      if (response.ok) return response.json();\n      return Promise.reject(response);\n    })\n    .catch((err) => {\n      return Promise.reject(err);\n    });\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  })\n    .then((response) => {\n      if (response.ok) return response.json();\n      return Promise.reject(response);\n    })\n    .then((data) => {\n      localStorage.setItem(\"jwt\", data.token);\n      return data;\n    })\n    .catch((err) => {\n      return Promise.reject(err);\n    });\n};\n\nexport const checkToken = () => {\n  if (localStorage.getItem(\"jwt\") != null)\n    return fetch(`${BASE_URL}/users/me`, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n      },\n    }).then(async (res) => {\n      try {\n        return await res.json();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n};\n","import { useEffect, useState } from \"react\";\n\nconst InfoTooltip = ({ onClose, isOpen, id, status, statusMessage }) => {\n  const spinner = (\n    <svg className='tooltip_spinner'>\n      <circle cx='60' cy='60' r='54' />\n    </svg>\n  );\n  const [toolTipMessage, setToolTipMessage] = useState(statusMessage);\n\n  const handleTooltipImage = () => {\n    if (status) return \"tooltip_success\";\n    if (status === false) return \"tooltip_failure\";\n  };\n  useEffect(() => {\n    if (status === null) setToolTipMessage(statusMessage);\n    if (status) {\n      setToolTipMessage(`Success! You have now been ${statusMessage}.`);\n    } else if (status === false) {\n      setToolTipMessage(\n        `Oops, something went wrong! Please try again.  \\n Error: ${statusMessage}.`\n      );\n    }\n  }, [statusMessage, status]);\n\n  return (\n    <div\n      // className={`popup ${isOpen ? \"popup_active\" : \"\"}`}\n      className={`popup ${isOpen ? \"popup_active\" : \"\"} `}\n      onClick={onClose}\n    >\n      <div\n        className='popup__window'\n        id={id}\n        onClick={(event) => {\n          event.stopPropagation();\n        }}\n      >\n        <button\n          className='button button_type_close'\n          type='button'\n          aria-label='Close win dow'\n          onClick={onClose}\n        ></button>\n        <div className={`tooltip ${handleTooltipImage()} `}>\n          {status === null && spinner}\n        </div>\n        <h2\n          className='popup__title popup__title_tooltip'\n          style={{ margin: \"0px auto 50px\", textAlign: \"center\" }}\n        >\n          {toolTipMessage}\n        </h2>\n      </div>\n    </div>\n  );\n};\n\nexport default InfoTooltip;\n","import { useEffect, useRef, useState, createRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as auth from \"../utils/auth.js\";\nimport FormValidator from \"../utils/FormValidator\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { loader } from \"../utils/loader.js\";\n\nconst Login = ({\n  handleLogin,\n  onClose,\n  onOpen,\n  isOpen,\n  checkLoggedIn,\n  loginStatus,\n}) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [status, setStatus] = useState(null);\n  const [form, setForm] = useState();\n  const [statusMessage, setStatusMessage] = useState(\"Loading\");\n  const formRef = useRef();\n  const buttonRef = createRef();\n\n  const handleSubmit = (e) => {\n    return auth\n      .authorize(email, password)\n      .then((data) => {\n        if (data.token) {\n          setEmail(\" \");\n          setPassword(\" \");\n        }\n      })\n      .catch(async (error) => {\n        const parsedError = await error.json();\n        return Promise.reject(parsedError.message || parsedError.error);\n      });\n  };\n\n  useEffect(() => {\n    if (loginStatus) {\n      setStatusMessage(\"Already Logged in, Redirecting..\");\n      onOpen();\n      setTimeout(() => {\n        checkLoggedIn();\n      }, 1000);\n    }\n    return () => {\n      onClose();\n    };\n  }, [loginStatus]);\n\n  useEffect(() => {\n    const validatedForm = new FormValidator(formRef.current, {\n      submitSelector: \"button_type_submit-dark\",\n    });\n    validatedForm.enableValidation();\n    setForm(validatedForm);\n  }, []);\n\n  return (\n    <>\n      <div className='login'>\n        <h2 className='page__title'>Log in</h2>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            onOpen();\n            setStatusMessage(\"Logging in\");\n            setStatus(null);\n            loader({\n              dots: {\n                interval: 75,\n                count: 4,\n              },\n              completeTimeDelay: 500,\n              buttonSelector: buttonRef.current,\n              clickHandler: handleSubmit,\n              onSuccess: () => {\n                setStatusMessage(\"Logged in\");\n                setStatus(true);\n                handleLogin(email);\n              },\n              onError: (err) => {\n                console.log(err);\n                setStatusMessage(err);\n                setStatus(false);\n              },\n              callbackEnd: () => {\n                onClose();\n                form.resetValidation();\n              },\n            });\n          }}\n          className='form form_dark'\n          ref={formRef}\n        >\n          <label htmlFor='email' className='form__field'>\n            <input\n              className='form__input form__input_dark'\n              required\n              id='email'\n              name='email'\n              type='email'\n              placeholder='Email'\n              value={email || \"\"}\n              onChange={(e) => {\n                setEmail(e.target.value);\n              }}\n            />\n            <span className='form__input-error'></span>\n          </label>\n          <label htmlFor='password' className='form__field'>\n            <input\n              className='form__input form__input_dark'\n              required\n              id='password'\n              name='password'\n              type='password'\n              minLength='6'\n              maxLength='10'\n              placeholder='Password'\n              value={password || \"\"}\n              onChange={(e) => {\n                setPassword(e.target.value);\n                console.log(password);\n              }}\n            />\n            <span className='form__input-error'></span>\n          </label>\n\n          <button\n            type='submit'\n            className='button button_type_submit-dark button_disabled'\n            disabled\n            ref={buttonRef}\n          >\n            Log in\n          </button>\n        </form>\n\n        <p className='page__caption'>\n          Not a member yet? &nbsp;\n          <Link to='/register' className='page__caption button'>\n            Sign up here!\n          </Link>\n        </p>\n      </div>\n\n      {\n        <InfoTooltip\n          onClose={onClose}\n          isOpen={isOpen}\n          status={status}\n          statusMessage={statusMessage}\n        />\n      }\n    </>\n  );\n};\n\nexport default Login;\n","import { useEffect, useRef, useState, createRef } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport * as auth from \"../utils/auth.js\";\nimport FormValidator from \"../utils/FormValidator\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { loader } from \"../utils/loader.js\";\nimport \"../blocks/register/register.css\";\n\nconst Register = ({\n  handleRegister,\n  onOpen,\n  onClose,\n  isOpen,\n  checkLoggedIn,\n  loginStatus,\n}) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [status, setStatus] = useState(null);\n  const [statusMessage, setStatusMessage] = useState(\"Loading\");\n  const [form, setForm] = useState();\n  const formRef = useRef();\n  const buttonRef = createRef();\n\n  const handleSubmit = (e) => {\n    return auth\n      .register(email, password)\n      .then((res) => {\n        console.log(res);\n        if (res.ok) {\n          handleRegister();\n        }\n      })\n      .catch(async (error) => {\n        const parsedError = await error.json();\n        return Promise.reject(parsedError.message || parsedError.error);\n      });\n  };\n  useEffect(() => {\n    if (loginStatus) {\n      setStatusMessage(\"Already Logged in, Redirecting..\");\n      onOpen();\n      setTimeout(() => {\n        checkLoggedIn();\n      }, 1000);\n    }\n    return () => {\n      onClose();\n    };\n  }, [loginStatus]);\n\n  useEffect(() => {\n    const validatedForm = new FormValidator(formRef.current, {\n      submitSelector: \"button_type_submit-dark\",\n    });\n    validatedForm.enableValidation();\n    setForm(validatedForm);\n  }, []);\n\n  return (\n    <>\n      <div className='register'>\n        <p className='page__title'>Sign Up</p>\n        <form\n          onSubmit={(e) => {\n            e.preventDefault();\n            onOpen();\n            setStatusMessage(\"Registering\");\n            setStatus(null);\n            loader({\n              dots: {\n                interval: 75,\n                count: 4,\n              },\n              completeTimeDelay: 500,\n              buttonSelector: buttonRef.current,\n              clickHandler: handleSubmit,\n              onSuccess: () => {\n                setStatusMessage(\"Registered\");\n                setStatus(true);\n              },\n              onError: (err) => {\n                // console.log(err);\n                setStatusMessage(err);\n                setStatus(false);\n              },\n              callbackEnd: () => {\n                onClose();\n                form.resetValidation();\n              },\n            });\n          }}\n          className='form form_dark'\n          ref={formRef}\n        >\n          <label htmlFor='email' className='form__field'>\n            <input\n              className='form__input form__input_dark'\n              placeholder='Email'\n              id='email'\n              name='email'\n              type='email'\n              value={email}\n              required\n              onChange={(e) => {\n                setEmail(e.target.value);\n              }}\n            />\n            <span className='form__input-error'></span>\n          </label>\n          <label htmlFor='email' className='form__field'>\n            <input\n              className='form__input form__input_dark'\n              placeholder='Password'\n              id='password'\n              name='password'\n              type='password'\n              minLength='6'\n              maxLength='10'\n              required\n              value={password}\n              onChange={(e) => {\n                setPassword(e.target.value);\n              }}\n            />{\" \"}\n            <span className='form__input-error'></span>\n          </label>\n\n          <button\n            type='submit'\n            className='button button_type_submit-dark button_disabled'\n            disabled\n            ref={buttonRef}\n          >\n            Sign up\n          </button>\n        </form>\n\n        <p className='page__caption'>\n          Already have an account? &nbsp;\n          <Link to='/login' className='page__caption button'>\n            Log in here!\n          </Link>\n        </p>\n      </div>\n      {\n        <InfoTooltip\n          onClose={onClose}\n          isOpen={isOpen}\n          status={status}\n          statusMessage={statusMessage}\n        />\n      }\n    </>\n  );\n};\n\nexport default Register;\n","import * as auth from \"../utils/auth\";\r\nimport { Navigate } from \"react-router\";\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  return auth.checkToken() ? children : <Navigate to='/login' />;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import { useEffect, useState, useRef } from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { Route, Routes, useNavigate, Navigate, Link } from \"react-router-dom\";\nimport api from \"../utils/api\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ImagePopup from \"./ImagePopup\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport ConfirmPopup from \"./ConfirmPopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\n\nimport * as auth from \"../utils/auth\";\n\n//mousePosition\nexport const useMousePosition = () => {\n  const [position, setPosition] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    const setFromEvent = (e) => setPosition({ x: e.clientX, y: e.clientY });\n    window.addEventListener(\"mousemove\", setFromEvent);\n\n    return () => {\n      window.removeEventListener(\"mousemove\", setFromEvent);\n    };\n  }, []);\n\n  return position;\n};\nfunction App() {\n  //isOpened\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isPlacePopupOpen, setIsPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isEnlargeAvatarPopupOpen, setIsEnlargeAvatarPopupOpen] =\n    useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false);\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = useState(false);\n\n  const [isToolTipOpen, setIsToolTipOpen] = useState(false);\n  //data holding states\n  const [selectedCard, setSelectedCard] = useState({});\n  const [currentUser, setCurrentUser] = useState({});\n  const [cardsData, setCardsData] = useState([]);\n  const [isUserLogged, setIsUserLogged] = useState(false);\n  const [loggedUser, setLoggedUser] = useState(\"\");\n\n  //function to add event listeners\n  function useKey(key, callback, condition) {\n    const callbackRef = useRef(callback);\n    useEffect(() => {\n      callbackRef.current = callback;\n    });\n\n    useEffect(() => {\n      if (!condition) {\n        return;\n      }\n      function handle(event) {\n        if (event.code === key) {\n          callbackRef.current(event);\n        }\n      }\n      document.addEventListener(\"keydown\", handle);\n      return () => document.removeEventListener(\"keydown\", handle);\n    }, [key, condition]);\n  }\n  //<<START>>data fetching functions <<START>>\n  const getUserInfo = async () => {\n    try {\n      const callData = await api.getProfile();\n      callData && setCurrentUser(callData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const getCards = async () => {\n    try {\n      const callData = await api.getInitialCards();\n      callData && setCardsData(callData);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  //<<END>>data fetching functions <<END>>\n  //<<START>>Card actions handles<<START>>\n  const handleCardLike = async (id, status) => {\n    if (status)\n      try {\n        const result = await api\n          .dislikePhoto(id)\n          .then((newCardData) =>\n            cardsData.map(\n              (card) =>\n                (card = newCardData._id === card._id ? newCardData : card)\n            )\n          );\n        setCardsData(result);\n      } catch (error) {\n        console.log(error);\n      }\n    else\n      try {\n        const result = await api\n          .likePhoto(id)\n          .then((newCardData) =>\n            cardsData.map(\n              (card) =>\n                (card = newCardData._id === card._id ? newCardData : card)\n            )\n          );\n        setCardsData(result);\n      } catch (error) {\n        console.log(error);\n      }\n  };\n\n  const handleDeleteCard = async () => {\n    const id = selectedCard._id;\n    try {\n      await api.deleteCardPost(id);\n      return setCardsData(cardsData.filter((card) => card._id !== id));\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  };\n\n  const handleAddCard = async (card) => {\n    try {\n      await api\n        .postNewCard(card)\n        .then((res) =>\n          setCardsData((Cards) => {\n            return [res].concat(Cards);\n          })\n        )\n        .catch((error) => Promise.reject(error));\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  };\n  //<<END>>Card actions handles<<END>>\n  //<<START>>Window openers & closers<<START>>\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsPlacePopupOpen(true);\n  };\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEnlargeAvatarClick = (currentUser) => {\n    setCurrentUser(currentUser);\n    setIsEnlargeAvatarPopupOpen(true);\n  };\n\n  const handleCardClick = (cardClicked) => {\n    setSelectedCard(cardClicked);\n    setIsImagePopupOpen(true);\n  };\n  const handleDeleteClick = (cardClicked) => {\n    setSelectedCard(cardClicked);\n    setIsConfirmPopupOpen(true);\n  };\n\n  // };\n  const handleClose = () => {\n    setIsImagePopupOpen(false);\n    setIsEnlargeAvatarPopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsConfirmPopupOpen(false);\n    setIsToolTipOpen(false);\n  };\n  //<<END>>Window openers & closers<<END>>\n  //<<START>>Profile updating handlers<<START>>\n  const handleUpdateUserData = async (data) => {\n    try {\n      return api\n        .updateProfile(data)\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((error) => Promise.reject(error));\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  };\n\n  const handleUpdateAvatarImage = async (data) => {\n    try {\n      return await api\n        .updateProfilePhoto(data.avatar)\n        .then((res) => {\n          setCurrentUser(res);\n        })\n        .catch((error) => Promise.reject(error));\n    } catch (error) {\n      return Promise.reject(error);\n    }\n  };\n  //<<END>>Profile updating handlers<<END>>\n  //<<START>>Navigation handlers<<START>>\n  const goLeft = () => {\n    let index = cardsData.findIndex((item) => item === selectedCard);\n    index =\n      parseInt(index - 1) >= 0 ? parseInt(index - 1) : cardsData.length - 1;\n    setSelectedCard(cardsData[index]);\n  };\n  const goRight = () => {\n    let index = cardsData.findIndex((item) => item === selectedCard);\n    index =\n      parseInt(index + 1) <= cardsData.length - 1 ? parseInt(index + 1) : 0;\n    setSelectedCard(cardsData[index]);\n  };\n  //<<END>>Navigation handlers<<END>>\n  const handleToolTipOpen = (details) => {\n    setIsToolTipOpen(true);\n  };\n  const navigate = useNavigate();\n  const handleLogin = (data) => {\n    data && console.log(data);\n    setIsUserLogged(true);\n    navigate(\"/\");\n    data && setLoggedUser(data);\n  };\n  const handleLogout = () => {\n    localStorage.clear();\n    setIsUserLogged(false);\n    navigate(\"/login\");\n  };\n  const checkLoggedIn = () => {\n    isUserLogged && navigate(\"/\");\n  };\n\n  //initialization\n  useEffect(async () => {\n    const validation = await auth.checkToken();\n    if (validation) {\n      try {\n        {\n          setLoggedUser(validation.data.email);\n          setIsUserLogged(true);\n          console.log(loggedUser);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      if (window.location.pathname === (\"/\" || null)) navigate(\"/login\");\n    }\n  }, []);\n\n  useEffect(() => {\n    getCards();\n    getUserInfo();\n  }, []);\n\n  return (\n    <div className='page'>\n      <div className='page__wrap'>\n        <Header\n          userEmail={loggedUser}\n          loginStatus={isUserLogged}\n          handleLogout={handleLogout}\n          navigate={navigate}\n        />\n        <CurrentUserContext.Provider value={currentUser}>\n          <Routes>\n            <Route\n              path='/register'\n              element={\n                <Register\n                  loginStatus={isUserLogged}\n                  checkLoggedIn={checkLoggedIn}\n                  onClose={handleClose}\n                  isOpen={isToolTipOpen}\n                  onOpen={handleToolTipOpen}\n                  navigate={navigate}\n                />\n              }\n            />\n            <Route\n              path='/login'\n              element={\n                <Login\n                  loginStatus={isUserLogged}\n                  checkLoggedIn={checkLoggedIn}\n                  handleLogin={handleLogin}\n                  setUser={setLoggedUser}\n                  onClose={handleClose}\n                  isOpen={isToolTipOpen}\n                  onOpen={handleToolTipOpen}\n                />\n              }\n            />\n            <Route\n              path='/'\n              element={\n                <ProtectedRoute>\n                  <Main\n                    onEditProfileClick={handleEditProfileClick}\n                    onAddPlaceClick={handleAddPlaceClick}\n                    onEditAvatarClick={handleEditAvatarClick}\n                    onEnlargeAvatarClick={handleEnlargeAvatarClick}\n                    onCardClick={handleCardClick}\n                    setUserData={handleUpdateUserData}\n                    handleCardLike={handleCardLike}\n                    onDeleteClick={handleDeleteClick}\n                    cardsData={cardsData}\n                  />\n\n                  <EditProfilePopup\n                    isOpen={isEditProfilePopupOpen}\n                    onClose={handleClose}\n                    updateCurrentUser={handleUpdateUserData}\n                    useKey={useKey}\n                  />\n\n                  <AddPlacePopup\n                    isOpen={isPlacePopupOpen}\n                    onClose={handleClose}\n                    addNewCard={handleAddCard}\n                    useKey={useKey}\n                  />\n\n                  <EditAvatarPopup\n                    isOpen={isEditAvatarPopupOpen}\n                    onClose={handleClose}\n                    updateCurrentUser={handleUpdateAvatarImage}\n                    useKey={useKey}\n                  />\n\n                  <ImagePopup\n                    isOpen={isImagePopupOpen}\n                    onClose={handleClose}\n                    id='w-img'\n                    targetObj={selectedCard}\n                    navigation={true}\n                    useKey={useKey}\n                    goLeft={goLeft}\n                    goRight={goRight}\n                  />\n                  <ImagePopup\n                    isOpen={isEnlargeAvatarPopupOpen}\n                    onClose={handleClose}\n                    id='w-piclrg'\n                    targetObj={currentUser}\n                    navigation={false}\n                    useKey={useKey}\n                    goLeft={goLeft}\n                    goRight={goRight}\n                  />\n                  <ConfirmPopup\n                    isOpen={isConfirmPopupOpen}\n                    onClose={handleClose}\n                    confirmDelete={handleDeleteCard}\n                  />\n                </ProtectedRoute>\n              }\n            />\n          </Routes>\n        </CurrentUserContext.Provider>\n        <Footer />\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}